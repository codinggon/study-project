<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments.html :: header"></head>

<body>

<th:block th:replace="fragments.html :: nav-main"></th:block>



<form class="needs-validation" th:action="@{/login}" method="post">
    <div class="form-group">
        <label for="username">nickname or password</label>
        <input type="text" class="form-control" id="username" name="username" aria-describedby="emailHelp"
               oninvalid="this.setCustomValidity('please select the item.')"
               required>
    </div>

    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" class="form-control" id="password" name="password" required>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>

</form>

<div th:if="${param.error}" class="alert alert-danger" role="alert">
    <p>email or password가 정확하지 않습니다.</p>
    <p><span th:href="@{/find-password}">패스워드 찾기</span>를 이용하세요.</p>
</div>


<footer th:replace="fragments.html :: footer"></footer>

    <script type="application/javascript">
        (function () {
            'use strict';

            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');

                // Loop over them and prevent submission
                Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated')
                    }, false)
                })
            }, false)
        }())

        // window.addEventListener('load', () => {
        //     let forms = document.querySelector('.needs-validation');
        //     forms.addEventListener('submit',function (event){
        //         if(forms.checkValidity() === false){
        //             event.preventDefault();
        //             event.stopPropagation();
        //         };
        //         forms.classList.add('was-validated')
        //     },false);
        //
        // },false);

    </script>

</body>
</html>